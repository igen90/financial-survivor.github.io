# 金融幸存者 (Financial Survivor)

一个以金融证券为主题的类吸血鬼幸存者游戏。在这个游戏中，你是一名投资者，需要在充满波动的金融市场中生存并增加你的资产。

## 游戏玩法

- **目标**：增加你的资产，避免破产。
- **控制**：
  - 方向键控制移动
  - 鼠标点击可以让角色移动到指定位置，武器会自动发射
- **游戏机制**：
  - 你的角色代表一名投资者
  - 红色圆圈是各种市场风险，会减少你的资产
  - 绿色圆圈是投资机会，收集它们可以增加你的资产
  - 使用机枪和火箭炮消灭市场风险
  - 每30秒你将获得一次升级机会

## 游戏元素

- **玩家（蓝色圆圈）**：你的投资者角色，带有循环切换的货币符号和光环效果
- **市场风险（各种形状）**：
  - **市场波动（三角形，红色）**：以锯齿形路径移动，显示箭头上下符号
  - **通货膨胀（正方形，橙色）**：随时间逐渐变大，显示上升箭头符号
  - **熊市（菱形，紫色）**：会更积极地追踪玩家，显示下降箭头符号
  - **经济衰退（五角星，深蓝色）**：被击中后会分裂成更小的实体，显示除号符号
- **资产（不同形状）**：
  - **股票**：显示折线图形状，绿色
  - **黄金**：显示金币形状，金色
  - **债券**：显示文档形状，蓝色
  - **现金**：显示纸币形状，青色
- **武器系统**：
  - **连射机枪**：快速连射的小型投资决策，黄色子弹，每秒发射10次（可开关）
  - **火箭炮**：强力爆炸型投资决策，红色火箭形状，具有范围伤害效果，2秒冷却时间，自动发射，带震撼爆发特效

## 升级系统

每30秒可以选择以下升级之一：

- **投资速度**：增加投资决策速度
- **投资能力**：增加单次投资收益
- **分析范围**：扩大市场分析范围
- **移动速度**：提高市场洞察速度

## 当前版本功能

- **V1.2.0 (当前)**
  - 完整的游戏循环：添加开始界面和重新开始功能
  - 鼠标坐标系统优化：修复鼠标点击与实际移动位置不一致的问题
  - 坐标转换系统：实现画布坐标和浏览器坐标的精确转换
  - UI交互优化：开始按钮和重新开始按钮直观操作
  - 游戏状态管理：优化游戏状态转换逻辑
  - 全新的全屏游戏体验：大型游戏画布支持更宽阔的游戏空间
  - 细节体验改进：游戏视觉和交互细节优化

## 版本更新履历

### V1.2.0 (2025-04-15)
- **新增功能**
  - 添加游戏开始界面：美观的游戏标题和开始按钮
  - 完整的游戏循环管理：从开始到结束到重新开始
  - 实现canvas坐标转换系统：确保不同尺寸屏幕下的点击位置准确性
  
- **优化改进**
  - 修复鼠标点击位置与实际角色移动位置不一致的问题
  - 改进游戏状态管理，确保游戏状态转换的流畅性
  - 优化重新开始功能：点击重新开始按钮后直接进入游戏
  - 优化UI元素反馈和交互体验
  - 代码结构优化：添加可复用的坐标转换函数

### V1.1.0 (2025-03-31)
- **新增功能**
  - 智能武器系统：所有武器自动瞄准最近的敌人
  - 机枪系统：快速射击的基础武器，每秒10发
  - 火箭炮系统：强力AOE武器，2秒冷却，带范围伤害
  - 火箭炮爆炸效果：增强视觉冲击力，包含冲击波和闪光
  - 扩大游戏场地：从800x560扩展到1600x1120，提供更宽广的游戏体验
  
- **优化改进**
  - 优化武器瞄准逻辑，确保无论玩家移动与否都能精准打击
  - 修复静止状态下不自动射击的bug
  - 调整画布尺寸比例，保持图标清晰度
  - 增强玩家移动控制流畅性
  - 优化性能表现，减少资源占用

### V1.0.0 (2025-03-15)
- 初始版本发布
- 模块化代码结构，通过实体文件夹更好地组织代码
- 玩家角色更新为专业投资者形象，带有货币符号和光环效果
- 市场风险使用金融相关图标，有粒子效果
- 资产收集物使用不同风格金融图标
- 投资决策带有粒子尾迹
- 粒子特效和动画效果增强
- 背景网格线和浮动货币符号

## 未来版本计划

- **V1.3.0**
  - 事件系统：随机金融事件影响游戏环境（牛市、熊市、崩盘等）
  - 关卡系统：不同金融时代的挑战（1929大萧条、2008金融危机等）
  - 特殊能力：可激活的稀有能力（如"内幕消息"、"杠杆交易"、"反向投资"）

## 如何运行

只需在浏览器中通过HTTP服务器打开`index.html`文件即可开始游戏。

您可以使用以下任一方法启动本地服务器：

1. 使用 Node.js 的 `http-server`：
   ```
   npx http-server
   ```

2. 使用 Python：
   ```
   # Python 3
   python -m http.server
   
   # Python 2
   python -m SimpleHTTPServer
   ```

3. 使用 Visual Studio Code 的 Live Server 扩展

## 项目结构

```
financial-survivor/
├── index.html        # 游戏的HTML结构
├── style.css         # 游戏的样式表
├── js/               # JavaScript模块目录
│   ├── main.js       # 游戏入口文件
│   ├── game.js       # 主游戏类
│   ├── config.js     # 游戏配置和常量
│   ├── player.js     # 玩家类
│   ├── entities/     # 游戏实体类文件夹
│   │   ├── index.js  # 实体导出文件
│   │   ├── MarketRisk.js # 市场风险类
│   │   ├── Opportunity.js # 投资机会类
│   │   ├── MachineGun.js # 机枪武器类
│   │   ├── Rocket.js # 火箭炮武器类
│   │   └── Asset.js  # 资产类
│   └── upgrade.js    # 升级系统
└── README.md         # 项目说明文档
```

## 技术说明

游戏使用现代JavaScript（ES6模块）和HTML5 Canvas实现，无需外部依赖。这是一个模块化结构的演示版本，可以根据需要进一步扩展功能。 